---
layout: blog_post
title: 'April Fools!'
author: mraible
description: "AsciiDoc rocks!"
tags: [asciidoc, asciidoctor]
---

= Sample Page
:uri-asciidoctor: http://asciidoctor.org

This is a sample page composed in AsciiDoc.
Jekyll converts it to HTML using {uri-asciidoctor}[Asciidoctor].

[source,ruby]
puts "Hello, World!"

.Read data from a file _synchronously_
====
[source,java,indent=0]
----
package com.example.io;

import lombok.extern.log4j.Log4j2;
import org.springframework.util.FileCopyUtils;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.util.function.Consumer;

@Log4j2
class Synchronous implements Reader {

    @Override
    public void read(File file, Consumer<BytesPayload> consumer) throws IOException {
        try (FileInputStream in = new FileInputStream(file)) { // <1>
            byte[] data = new byte[FileCopyUtils.BUFFER_SIZE];
            int res;
            while ((res = in.read(data, 0, data.length)) != -1) { // <2>
                    consumer.accept(BytesPayload.from(data, res)); //<3>
            }
        }
    }
}
----
<1> source the file using a regular `java.io.File`
<2> _pull_ the results out of the source one line at a time..
<3> I've written this code to accept a `Consumer<BytesPayload>` that gets called when there's new data
====
